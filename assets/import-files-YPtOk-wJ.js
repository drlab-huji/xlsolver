import{k as gr,g as yr}from"./index-CPmdMulF.js";import{useMemo as It,useRef as Wt,useSyncExternalStore as wr,useCallback as _r,useLayoutEffect as Sr,useEffect as Pr,useDebugValue as kr}from"https://esm.sh/react@^19.0.0";function Er(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ot={},br=function(e,t,r,n,i){var c=new Worker(Ot[t]||(Ot[t]=URL.createObjectURL(new Blob([e+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return c.onmessage=function(f){var l=f.data,h=l.$e$;if(h){var a=new Error(h[0]);a.code=h[1],a.stack=h[2],i(a,null)}else i(null,l)},c.postMessage(r,n),c},te=Uint8Array,fe=Uint16Array,et=Int32Array,ze=new te([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),$e=new te([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ge=new te([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ht=function(e,t){for(var r=new fe(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var i=new et(r[30]),n=1;n<30;++n)for(var c=r[n];c<r[n+1];++c)i[c]=c-r[n]<<5|n;return{b:r,r:i}},Kt=Ht(ze,2),gt=Kt.b,ft=Kt.r;gt[28]=258,ft[258]=28;var Bt=Ht($e,0),Yt=Bt.b,xt=Bt.r,Ze=new fe(32768);for(var Q=0;Q<32768;++Q){var Pe=(Q&43690)>>1|(Q&21845)<<1;Pe=(Pe&52428)>>2|(Pe&13107)<<2,Pe=(Pe&61680)>>4|(Pe&3855)<<4,Ze[Q]=((Pe&65280)>>8|(Pe&255)<<8)>>1}var pe=function(e,t,r){for(var n=e.length,i=0,c=new fe(t);i<n;++i)e[i]&&++c[e[i]-1];var f=new fe(t);for(i=1;i<t;++i)f[i]=f[i-1]+c[i-1]<<1;var l;if(r){l=new fe(1<<t);var h=15-t;for(i=0;i<n;++i)if(e[i])for(var a=i<<4|e[i],u=t-e[i],p=f[e[i]-1]++<<u,g=p|(1<<u)-1;p<=g;++p)l[Ze[p]>>h]=a}else for(l=new fe(n),i=0;i<n;++i)e[i]&&(l[i]=Ze[f[e[i]-1]++]>>15-e[i]);return l},ke=new te(288);for(var Q=0;Q<144;++Q)ke[Q]=8;for(var Q=144;Q<256;++Q)ke[Q]=9;for(var Q=256;Q<280;++Q)ke[Q]=7;for(var Q=280;Q<288;++Q)ke[Q]=8;var Fe=new te(32);for(var Q=0;Q<32;++Q)Fe[Q]=5;var Rr=pe(ke,9,0),Vt=pe(ke,9,1),Tr=pe(Fe,5,0),Jt=pe(Fe,5,1),Ye=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},le=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&r},Ve=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},tt=function(e){return(e+7)/8|0},Te=function(e,t,r){return(t==null||t<0)&&(t=0),(r==null||r>e.length)&&(r=e.length),new te(e.subarray(t,r))},Gt=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ne=function(e,t,r){var n=new Error(t||Gt[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,ne),!r)throw n;return n},rt=function(e,t,r,n){var i=e.length,c=n?n.length:0;if(!i||t.f&&!t.l)return r||new te(0);var f=!r,l=f||t.i!=2,h=t.i;f&&(r=new te(i*3));var a=function(I){var Y=r.length;if(I>Y){var G=new te(Math.max(Y*2,I));G.set(r),r=G}},u=t.f||0,p=t.p||0,g=t.b||0,T=t.l,D=t.d,L=t.m,m=t.n,w=i*8;do{if(!T){u=le(e,p,1);var _=le(e,p+1,3);if(p+=3,_)if(_==1)T=Vt,D=Jt,L=9,m=5;else if(_==2){var q=le(e,p,31)+257,b=le(e,p+10,15)+4,o=q+le(e,p+5,31)+1;p+=14;for(var s=new te(o),d=new te(19),v=0;v<b;++v)d[Ge[v]]=le(e,p+v*3,7);p+=b*3;for(var y=Ye(d),x=(1<<y)-1,j=pe(d,y,1),v=0;v<o;){var V=j[le(e,p,x)];p+=V&15;var E=V>>4;if(E<16)s[v++]=E;else{var K=0,k=0;for(E==16?(k=3+le(e,p,3),p+=2,K=s[v-1]):E==17?(k=3+le(e,p,7),p+=3):E==18&&(k=11+le(e,p,127),p+=7);k--;)s[v++]=K}}var $=s.subarray(0,q),P=s.subarray(q);L=Ye($),m=Ye(P),T=pe($,L,1),D=pe(P,m,1)}else ne(1);else{var E=tt(p)+4,O=e[E-4]|e[E-3]<<8,z=E+O;if(z>i){h&&ne(0);break}l&&a(g+O),r.set(e.subarray(E,z),g),t.b=g+=O,t.p=p=z*8,t.f=u;continue}if(p>w){h&&ne(0);break}}l&&a(g+131072);for(var ee=(1<<L)-1,R=(1<<m)-1,A=p;;A=p){var K=T[Ve(e,p)&ee],S=K>>4;if(p+=K&15,p>w){h&&ne(0);break}if(K||ne(2),S<256)r[g++]=S;else if(S==256){A=p,T=null;break}else{var W=S-254;if(S>264){var v=S-257,C=ze[v];W=le(e,p,(1<<C)-1)+gt[v],p+=C}var B=D[Ve(e,p)&R],re=B>>4;B||ne(3),p+=B&15;var P=Yt[re];if(re>3){var C=$e[re];P+=Ve(e,p)&(1<<C)-1,p+=C}if(p>w){h&&ne(0);break}l&&a(g+131072);var M=g+W;if(g<P){var N=c-P,J=Math.min(P,M);for(N+g<0&&ne(3);g<J;++g)r[g]=n[N+g]}for(;g<M;++g)r[g]=r[g-P]}}t.l=T,t.p=A,t.b=g,t.f=u,T&&(u=1,t.m=L,t.d=D,t.n=m)}while(!u);return g!=r.length&&f?Te(r,0,g):r.subarray(0,g)},_e=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},xe=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},st=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var i=r.length,c=r.slice();if(!i)return{t:Qt,l:0};if(i==1){var f=new te(r[0].s+1);return f[r[0].s]=1,{t:f,l:1}}r.sort(function(z,q){return z.f-q.f}),r.push({s:-1,f:25001});var l=r[0],h=r[1],a=0,u=1,p=2;for(r[0]={s:-1,f:l.f+h.f,l,r:h};u!=i-1;)l=r[r[a].f<r[p].f?a++:p++],h=r[a!=u&&r[a].f<r[p].f?a++:p++],r[u++]={s:-1,f:l.f+h.f,l,r:h};for(var g=c[0].s,n=1;n<i;++n)c[n].s>g&&(g=c[n].s);var T=new fe(g+1),D=ut(r[u-1],T,0);if(D>t){var n=0,L=0,m=D-t,w=1<<m;for(c.sort(function(q,b){return T[b.s]-T[q.s]||q.f-b.f});n<i;++n){var _=c[n].s;if(T[_]>t)L+=w-(1<<D-T[_]),T[_]=t;else break}for(L>>=m;L>0;){var E=c[n].s;T[E]<t?L-=1<<t-T[E]++-1:++n}for(;n>=0&&L;--n){var O=c[n].s;T[O]==t&&(--T[O],++L)}D=t}return{t:new te(T),l:D}},ut=function(e,t,r){return e.s==-1?Math.max(ut(e.l,t,r+1),ut(e.r,t,r+1)):t[e.s]=r},At=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new fe(++t),n=0,i=e[0],c=1,f=function(h){r[n++]=h},l=1;l<=t;++l)if(e[l]==i&&l!=t)++c;else{if(!i&&c>2){for(;c>138;c-=138)f(32754);c>2&&(f(c>10?c-11<<5|28690:c-3<<5|12305),c=0)}else if(c>3){for(f(i),--c;c>6;c-=6)f(8304);c>2&&(f(c-3<<5|8208),c=0)}for(;c--;)f(i);c=1,i=e[l]}return{c:r.subarray(0,n),n:t}},Ae=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},Zt=function(e,t,r){var n=r.length,i=tt(t+2);e[i]=n&255,e[i+1]=n>>8,e[i+2]=e[i]^255,e[i+3]=e[i+1]^255;for(var c=0;c<n;++c)e[i+c+4]=r[c];return(i+4+n)*8},Ct=function(e,t,r,n,i,c,f,l,h,a,u){_e(t,u++,r),++i[256];for(var p=st(i,15),g=p.t,T=p.l,D=st(c,15),L=D.t,m=D.l,w=At(g),_=w.c,E=w.n,O=At(L),z=O.c,q=O.n,b=new fe(19),o=0;o<_.length;++o)++b[_[o]&31];for(var o=0;o<z.length;++o)++b[z[o]&31];for(var s=st(b,7),d=s.t,v=s.l,y=19;y>4&&!d[Ge[y-1]];--y);var x=a+5<<3,j=Ae(i,ke)+Ae(c,Fe)+f,V=Ae(i,g)+Ae(c,L)+f+14+3*y+Ae(b,d)+2*b[16]+3*b[17]+7*b[18];if(h>=0&&x<=j&&x<=V)return Zt(t,u,e.subarray(h,h+a));var K,k,$,P;if(_e(t,u,1+(V<j)),u+=2,V<j){K=pe(g,T,0),k=g,$=pe(L,m,0),P=L;var ee=pe(d,v,0);_e(t,u,E-257),_e(t,u+5,q-1),_e(t,u+10,y-4),u+=14;for(var o=0;o<y;++o)_e(t,u+3*o,d[Ge[o]]);u+=3*y;for(var R=[_,z],A=0;A<2;++A)for(var S=R[A],o=0;o<S.length;++o){var W=S[o]&31;_e(t,u,ee[W]),u+=d[W],W>15&&(_e(t,u,S[o]>>5&127),u+=S[o]>>12)}}else K=Rr,k=ke,$=Tr,P=Fe;for(var o=0;o<l;++o){var C=n[o];if(C>255){var W=C>>18&31;xe(t,u,K[W+257]),u+=k[W+257],W>7&&(_e(t,u,C>>23&31),u+=ze[W]);var B=C&31;xe(t,u,$[B]),u+=P[B],B>3&&(xe(t,u,C>>5&8191),u+=$e[B])}else xe(t,u,K[C]),u+=k[C]}return xe(t,u,K[256]),u+k[256]},Ir=new et([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Qt=new te(0),Or=function(e,t,r,n,i,c){var f=c.z||e.length,l=new te(n+f+5*(1+Math.ceil(f/7e3))+i),h=l.subarray(n,l.length-i),a=c.l,u=(c.r||0)&7;if(t){u&&(h[0]=c.r>>3);for(var p=Ir[t-1],g=p>>13,T=p&8191,D=(1<<r)-1,L=c.p||new fe(32768),m=c.h||new fe(D+1),w=Math.ceil(r/3),_=2*w,E=function(H){return(e[H]^e[H+1]<<w^e[H+2]<<_)&D},O=new et(25e3),z=new fe(288),q=new fe(32),b=0,o=0,s=c.i||0,d=0,v=c.w||0,y=0;s+2<f;++s){var x=E(s),j=s&32767,V=m[x];if(L[j]=V,m[x]=j,v<=s){var K=f-s;if((b>7e3||d>24576)&&(K>423||!a)){u=Ct(e,h,0,O,z,q,o,d,y,s-y,u),d=b=o=0,y=s;for(var k=0;k<286;++k)z[k]=0;for(var k=0;k<30;++k)q[k]=0}var $=2,P=0,ee=T,R=j-V&32767;if(K>2&&x==E(s-R))for(var A=Math.min(g,K)-1,S=Math.min(32767,s),W=Math.min(258,K);R<=S&&--ee&&j!=V;){if(e[s+$]==e[s+$-R]){for(var C=0;C<W&&e[s+C]==e[s+C-R];++C);if(C>$){if($=C,P=R,C>A)break;for(var B=Math.min(R,C-2),re=0,k=0;k<B;++k){var M=s-R+k&32767,N=L[M],J=M-N&32767;J>re&&(re=J,V=M)}}}j=V,V=L[j],R+=j-V&32767}if(P){O[d++]=268435456|ft[$]<<18|xt[P];var I=ft[$]&31,Y=xt[P]&31;o+=ze[I]+$e[Y],++z[257+I],++q[Y],v=s+$,++b}else O[d++]=e[s],++z[e[s]]}}for(s=Math.max(s,v);s<f;++s)O[d++]=e[s],++z[e[s]];u=Ct(e,h,a,O,z,q,o,d,y,s-y,u),a||(c.r=u&7|h[u/8|0]<<3,u-=7,c.h=m,c.p=L,c.i=s,c.w=v)}else{for(var s=c.w||0;s<f+a;s+=65535){var G=s+65535;G>=f&&(h[u/8|0]=a,G=f),u=Zt(h,u+1,e.subarray(s,G))}c.i=f}return Te(l,0,n+tt(u)+i)},xr=function(){for(var e=new Int32Array(256),t=0;t<256;++t){for(var r=t,n=9;--n;)r=(r&1&&-306674912)^r>>>1;e[t]=r}return e}(),Ar=function(){var e=-1;return{p:function(t){for(var r=e,n=0;n<t.length;++n)r=xr[r&255^t[n]]^r>>>8;e=r},d:function(){return~e}}},Cr=function(e,t,r,n,i){if(!i&&(i={l:1},t.dictionary)){var c=t.dictionary.subarray(-32768),f=new te(c.length+e.length);f.set(c),f.set(e,c.length),e=f,i.w=c.length}return Or(e,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,i)},Mr=function(e,t){var r={};for(var n in e)r[n]=e[n];for(var n in t)r[n]=t[n];return r},Mt=function(e,t,r){for(var n=e(),i=e.toString(),c=i.slice(i.indexOf("[")+1,i.lastIndexOf("]")).replace(/\s+/g,"").split(","),f=0;f<n.length;++f){var l=n[f],h=c[f];if(typeof l=="function"){t+=";"+h+"=";var a=l.toString();if(l.prototype)if(a.indexOf("[native code]")!=-1){var u=a.indexOf(" ",8)+1;t+=a.slice(u,a.indexOf("(",u))}else{t+=a;for(var p in l.prototype)t+=";"+h+".prototype."+p+"="+l.prototype[p].toString()}else t+=a}else r[h]=l}return t},qe=[],Dr=function(e){var t=[];for(var r in e)e[r].buffer&&t.push((e[r]=new e[r].constructor(e[r])).buffer);return t},Fr=function(e,t,r,n){if(!qe[r]){for(var i="",c={},f=e.length-1,l=0;l<f;++l)i=Mt(e[l],i,c);qe[r]={c:Mt(e[f],i,c),e:c}}var h=Mr({},qe[r].e);return br(qe[r].c+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+t.toString()+"}",r,h,Dr(h),n)},Lr=function(){return[te,fe,et,ze,$e,Ge,gt,Yt,Vt,Jt,Ze,Gt,pe,Ye,le,Ve,tt,Te,ne,rt,nt,Xt,er]},Xt=function(e){return postMessage(e,[e.buffer])},er=function(e){return e&&{out:e.size&&new te(e.size),dictionary:e.dictionary}},zr=function(e,t,r,n,i,c){var f=Fr(r,n,i,function(l,h){f.terminate(),c(l,h)});return f.postMessage([e,t],t.consume?[e.buffer]:[]),function(){f.terminate()}},ye=function(e,t){return e[t]|e[t+1]<<8},de=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},ot=function(e,t){return de(e,t)+de(e,t+4)*4294967296},lt=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},$r=function(e,t){var r=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:t.level==9?2:0,e[9]=3,t.mtime!=0&&lt(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),r){e[3]=8;for(var n=0;n<=r.length;++n)e[n+10]=r.charCodeAt(n)}},Nr=function(e){(e[0]!=31||e[1]!=139||e[2]!=8)&&ne(6,"invalid gzip data");var t=e[3],r=10;t&4&&(r+=(e[10]|e[11]<<8)+2);for(var n=(t>>3&1)+(t>>4&1);n>0;n-=!e[r++]);return r+(t&2)},Ur=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},qr=function(e){return 10+(e.filename?e.filename.length+1:0)},jr=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&ne(6,"invalid zlib data"),(e[1]>>5&1)==1&&ne(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function Wr(e,t,r){return r||(r=t,t={}),typeof r!="function"&&ne(7),zr(e,t,[Lr],function(n){return Xt(nt(n.data[0],er(n.data[1])))},1,r)}function nt(e,t){return rt(e,{i:2},t&&t.out,t&&t.dictionary)}function Xn(e,t){t||(t={});var r=Ar(),n=e.length;r.p(e);var i=Cr(e,t,qr(t),8),c=i.length;return $r(i,t),lt(i,c-8,r.d()),lt(i,c-4,n),i}function Hr(e,t){var r=Nr(e);return r+8>e.length&&ne(6,"invalid gzip data"),rt(e.subarray(r,-8),{i:2},new te(Ur(e)),t)}function Kr(e,t){return rt(e.subarray(jr(e),-4),{i:2},t,t)}function Br(e,t){return e[0]==31&&e[1]==139&&e[2]==8?Hr(e,t):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?nt(e,t):Kr(e,t)}var Dt=typeof TextEncoder<"u"&&new TextEncoder,ht=typeof TextDecoder<"u"&&new TextDecoder,Yr=0;try{ht.decode(Qt,{stream:!0}),Yr=1}catch{}var Vr=function(e){for(var t="",r=0;;){var n=e[r++],i=(n>127)+(n>223)+(n>239);if(r+i>e.length)return{s:t,r:Te(e,r-1)};i?i==3?(n=((n&15)<<18|(e[r++]&63)<<12|(e[r++]&63)<<6|e[r++]&63)-65536,t+=String.fromCharCode(55296|n>>10,56320|n&1023)):i&1?t+=String.fromCharCode((n&31)<<6|e[r++]&63):t+=String.fromCharCode((n&15)<<12|(e[r++]&63)<<6|e[r++]&63):t+=String.fromCharCode(n)}};function ei(e,t){var r;if(Dt)return Dt.encode(e);for(var n=e.length,i=new te(e.length+(e.length>>1)),c=0,f=function(a){i[c++]=a},r=0;r<n;++r){if(c+5>i.length){var l=new te(c+8+(n-r<<1));l.set(i),i=l}var h=e.charCodeAt(r);h<128||t?f(h):h<2048?(f(192|h>>6),f(128|h&63)):h>55295&&h<57344?(h=65536+(h&1047552)|e.charCodeAt(++r)&1023,f(240|h>>18),f(128|h>>12&63),f(128|h>>6&63),f(128|h&63)):(f(224|h>>12),f(128|h>>6&63),f(128|h&63))}return Te(i,0,c)}function tr(e,t){if(t){for(var r="",n=0;n<e.length;n+=16384)r+=String.fromCharCode.apply(null,e.subarray(n,n+16384));return r}else{if(ht)return ht.decode(e);var i=Vr(e),c=i.s,r=i.r;return r.length&&ne(8),c}}var Jr=function(e,t){return t+30+ye(e,t+26)+ye(e,t+28)},Gr=function(e,t,r){var n=ye(e,t+28),i=tr(e.subarray(t+46,t+46+n),!(ye(e,t+8)&2048)),c=t+46+n,f=de(e,t+20),l=r&&f==4294967295?Zr(e,c):[f,de(e,t+24),de(e,t+42)],h=l[0],a=l[1],u=l[2];return[ye(e,t+10),h,a,i,c+ye(e,t+30)+ye(e,t+32),u]},Zr=function(e,t){for(;ye(e,t)!=1;t+=4+ye(e,t+2));return[ot(e,t+12),ot(e,t+4),ot(e,t+20)]},Ft=typeof queueMicrotask=="function"?queueMicrotask:typeof setTimeout=="function"?setTimeout:function(e){e()};function Qr(e,t,r){r||(r=t,t={}),typeof r!="function"&&ne(7);var n=[],i=function(){for(var m=0;m<n.length;++m)n[m]()},c={},f=function(m,w){Ft(function(){r(m,w)})};Ft(function(){f=r});for(var l=e.length-22;de(e,l)!=101010256;--l)if(!l||e.length-l>65558)return f(ne(13,0,1),null),i;var h=ye(e,l+8);if(h){var a=h,u=de(e,l+16),p=u==4294967295||a==65535;if(p){var g=de(e,l-12);p=de(e,g)==101075792,p&&(a=h=de(e,g+32),u=de(e,g+48))}for(var T=t&&t.filter,D=function(m){var w=Gr(e,u,p),_=w[0],E=w[1],O=w[2],z=w[3],q=w[4],b=w[5],o=Jr(e,b);u=q;var s=function(v,y){v?(i(),f(v,null)):(y&&(c[z]=y),--h||f(null,c))};if(!T||T({name:z,size:E,originalSize:O,compression:_}))if(!_)s(null,Te(e,o,o+E));else if(_==8){var d=e.subarray(o,o+E);if(O<524288||E>.8*O)try{s(null,nt(d,{out:new te(O)}))}catch(v){s(v,null)}else n.push(Wr(d,{size:O},s))}else s(ne(14,"unknown compression type "+_,1),null);else s(null,null)},L=0;L<a;++L)D(L)}else f(null,{});return i}const Xr=Symbol(),yt=Symbol(),Ce="a",rr="f",Lt="p",nr="c",ir="t",wt="h",De="w",_t="o",St="k";let en=(e,t)=>new Proxy(e,t);const dt=Object.getPrototypeOf,pt=new WeakMap,sr=e=>e&&(pt.has(e)?pt.get(e):dt(e)===Object.prototype||dt(e)===Array.prototype),Qe=e=>typeof e=="object"&&e!==null,tn=e=>Object.values(Object.getOwnPropertyDescriptors(e)).some(t=>!t.configurable&&!t.writable),rn=e=>{if(Array.isArray(e))return Array.from(e);const t=Object.getOwnPropertyDescriptors(e);return Object.values(t).forEach(r=>{r.configurable=!0}),Object.create(dt(e),t)},nn=(e,t)=>{const r={[rr]:t};let n=!1;const i=(l,h)=>{if(!n){let a=r[Ce].get(e);if(a||(a={},r[Ce].set(e,a)),l===De)a[De]=!0;else{let u=a[l];u||(u=new Set,a[l]=u),u.add(h)}}},c=()=>{n=!0,r[Ce].delete(e)},f={get(l,h){return h===yt?e:(i(St,h),or(Reflect.get(l,h),r[Ce],r[nr],r[ir]))},has(l,h){return h===Xr?(c(),!0):(i(wt,h),Reflect.has(l,h))},getOwnPropertyDescriptor(l,h){return i(_t,h),Reflect.getOwnPropertyDescriptor(l,h)},ownKeys(l){return i(De),Reflect.ownKeys(l)}};return t&&(f.set=f.deleteProperty=()=>!1),[f,r]},Pt=e=>e[yt]||e,or=(e,t,r,n)=>{if(!sr(e))return e;let i=n&&n.get(e);if(!i){const h=Pt(e);tn(h)?i=[h,rn(h)]:i=[h],n==null||n.set(e,i)}const[c,f]=i;let l=r&&r.get(c);return(!l||l[1][rr]!==!!f)&&(l=nn(c,!!f),l[1][Lt]=en(f||c,l[0]),r&&r.set(c,l)),l[1][Ce]=t,l[1][nr]=r,l[1][ir]=n,l[1][Lt]},sn=(e,t)=>{const r=Reflect.ownKeys(e),n=Reflect.ownKeys(t);return r.length!==n.length||r.some((i,c)=>i!==n[c])},ar=(e,t,r,n,i=Object.is)=>{if(i(e,t))return!1;if(!Qe(e)||!Qe(t))return!0;const c=r.get(Pt(e));if(!c)return!0;if(n){if(n.get(e)===t)return!1;n.set(e,t)}let f=null;for(const l of c[wt]||[])if(f=Reflect.has(e,l)!==Reflect.has(t,l),f)return f;if(c[De]===!0){if(f=sn(e,t),f)return f}else for(const l of c[_t]||[]){const h=!!Reflect.getOwnPropertyDescriptor(e,l),a=!!Reflect.getOwnPropertyDescriptor(t,l);if(f=h!==a,f)return f}for(const l of c[St]||[])if(f=ar(e[l],t[l],r,n,i),f)return f;if(f===null)throw new Error("invalid used");return f},on=e=>sr(e)&&e[yt]||null,zt=(e,t=!0)=>{pt.set(e,t)},an=(e,t,r)=>{const n=[],i=new WeakSet,c=(f,l)=>{var h,a,u;if(i.has(f))return;Qe(f)&&i.add(f);const p=Qe(f)&&t.get(Pt(f));if(p){if((h=p[wt])===null||h===void 0||h.forEach(g=>{const T=`:has(${String(g)})`;n.push(l?[...l,T]:[T])}),p[De]===!0){const g=":ownKeys";n.push(l?[...l,g]:[g])}else(a=p[_t])===null||a===void 0||a.forEach(g=>{const T=`:hasOwn(${String(g)})`;n.push(l?[...l,T]:[T])});(u=p[St])===null||u===void 0||u.forEach(g=>{"value"in(Object.getOwnPropertyDescriptor(f,g)||{})&&c(f[g],l?[...l,g]:[g])})}else l&&n.push(l)};return c(e),n},Xe={},kt=e=>typeof e=="object"&&e!==null,cn=e=>kt(e)&&!Ne.has(e)&&(Array.isArray(e)||!(Symbol.iterator in e))&&!(e instanceof WeakMap)&&!(e instanceof WeakSet)&&!(e instanceof Error)&&!(e instanceof Number)&&!(e instanceof Date)&&!(e instanceof String)&&!(e instanceof RegExp)&&!(e instanceof ArrayBuffer)&&!(e instanceof Promise),cr=(e,t)=>{const r=vt.get(e);if((r==null?void 0:r[0])===t)return r[1];const n=Array.isArray(e)?[]:Object.create(Object.getPrototypeOf(e));return zt(n,!0),vt.set(e,[t,n]),Reflect.ownKeys(e).forEach(i=>{if(Object.getOwnPropertyDescriptor(n,i))return;const c=Reflect.get(e,i),{enumerable:f}=Reflect.getOwnPropertyDescriptor(e,i),l={value:c,enumerable:f,configurable:!0};if(Ne.has(c))zt(c,!1);else if(Ee.has(c)){const[h,a]=Ee.get(c);l.value=cr(h,a())}Object.defineProperty(n,i,l)}),Object.preventExtensions(n)},fn=(e,t,r,n)=>({deleteProperty(i,c){const f=Reflect.get(i,c);r(c);const l=Reflect.deleteProperty(i,c);return l&&n(["delete",[c],f]),l},set(i,c,f,l){const h=!e()&&Reflect.has(i,c),a=Reflect.get(i,c,l);if(h&&($t(a,f)||Le.has(f)&&$t(a,Le.get(f))))return!0;r(c),kt(f)&&(f=on(f)||f);const u=!Ee.has(f)&&ln(f)?Ue(f):f;return t(c,u),Reflect.set(i,c,u,l),n(["set",[c],f,a]),!0}}),Ee=new WeakMap,Ne=new WeakSet,vt=new WeakMap,Me=[1,1],Le=new WeakMap;let $t=Object.is,un=(e,t)=>new Proxy(e,t),ln=cn,hn=cr,dn=fn;function Ue(e={}){if(!kt(e))throw new Error("object required");const t=Le.get(e);if(t)return t;let r=Me[0];const n=new Set,i=(m,w=++Me[0])=>{r!==w&&(r=w,n.forEach(_=>_(m,w)))};let c=Me[1];const f=(m=++Me[1])=>(c!==m&&!n.size&&(c=m,h.forEach(([w])=>{const _=w[1](m);_>r&&(r=_)})),r),l=m=>(w,_)=>{const E=[...w];E[1]=[m,...E[1]],i(E,_)},h=new Map,a=(m,w)=>{const _=!Ne.has(w)&&Ee.get(w);if(_){if((Xe?"production":void 0)!=="production"&&h.has(m))throw new Error("prop listener already exists");if(n.size){const E=_[2](l(m));h.set(m,[_,E])}else h.set(m,[_])}},u=m=>{var w;const _=h.get(m);_&&(h.delete(m),(w=_[1])==null||w.call(_))},p=m=>(n.add(m),n.size===1&&h.forEach(([_,E],O)=>{if((Xe?"production":void 0)!=="production"&&E)throw new Error("remove already exists");const z=_[2](l(O));h.set(O,[_,z])}),()=>{n.delete(m),n.size===0&&h.forEach(([_,E],O)=>{E&&(E(),h.set(O,[_]))})});let g=!0;const T=dn(()=>g,a,u,i),D=un(e,T);Le.set(e,D);const L=[e,f,p];return Ee.set(D,L),Reflect.ownKeys(e).forEach(m=>{const w=Object.getOwnPropertyDescriptor(e,m);"value"in w&&w.writable&&(D[m]=e[m])}),g=!1,D}function pn(e,t,r){const n=Ee.get(e);(Xe?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");let i;const c=[],f=n[2];let l=!1;const a=f(u=>{c.push(u),i||(i=Promise.resolve().then(()=>{i=void 0,l&&t(c.splice(0))}))});return l=!0,()=>{l=!1,a()}}function mt(e){const t=Ee.get(e);(Xe?"production":void 0)!=="production"&&!t&&console.warn("Please use proxy object");const[r,n]=t;return hn(r,n())}function vn(e){return Ne.add(e),e}function Et(){return{proxyStateMap:Ee,refSet:Ne,snapCache:vt,versionHolder:Me,proxyCache:Le}}const mn={},gn=(e,t)=>{const r=Wt(void 0);Pr(()=>{r.current=an(e,t)}),kr(r.current)},yn=gn,wn=new WeakMap;function _n(e,t){const n=It(()=>e&&new WeakMap,[e]),i=Wt(void 0);let c=!0;const f=wr(_r(h=>{const a=pn(e,h);return h(),a},[e,void 0]),()=>{const h=mt(e);try{if(!c&&i.current&&!ar(i.current,h,n,new WeakMap))return i.current}catch{}return h},()=>mt(e));c=!1,Sr(()=>{i.current=f}),(mn?"production":void 0)!=="production"&&yn(f,n);const l=It(()=>new WeakMap,[]);return or(f,n,l,wn)}const{proxyStateMap:fr,snapCache:Sn}=Et(),je=e=>fr.has(e),Pn=e=>Symbol.toStringTag in e&&e[Symbol.toStringTag]==="Map"&&fr.has(e);function bt(e){const t=[];let r=0;const n=new Map,i=new WeakMap,c=()=>{const a=Sn.get(l),u=a==null?void 0:a[1];if(u&&!i.has(u)){const p=new Map(n);i.set(u,p)}},f=a=>i.get(a)||n;if(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError(`proxyMap:
	initial state must be iterable
		tip: structure should be [[key, value]]`);for(const[a,u]of e)n.set(a,r),t[r++]=u}const l={data:t,index:r,epoch:0,get size(){return je(this)||c(),f(this).size},get(a){const p=f(this).get(a);if(p===void 0){this.epoch;return}return this.data[p]},has(a){const u=f(this);return this.epoch,u.has(a)},set(a,u){if(!je(this))throw new Error("Cannot perform mutations on a snapshot");const p=n.get(a);return p===void 0?(n.set(a,this.index),this.data[this.index++]=u):this.data[p]=u,this.epoch++,this},delete(a){if(!je(this))throw new Error("Cannot perform mutations on a snapshot");const u=n.get(a);return u===void 0?!1:(delete this.data[u],n.delete(a),this.epoch++,!0)},clear(){if(!je(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,n.clear()},forEach(a){this.epoch,f(this).forEach((p,g)=>{a(this.data[p],g,this)})},*entries(){this.epoch;const a=f(this);for(const[u,p]of a)yield[u,this.data[p]]},*keys(){this.epoch;const a=f(this);for(const u of a.keys())yield u},*values(){this.epoch;const a=f(this);for(const u of a.values())yield this.data[u]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},h=Ue(l);return Object.defineProperties(h,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(h),h}const{proxyStateMap:ur,snapCache:kn}=Et(),We=e=>typeof e=="object"?Ue({x:e}).x:e,He=e=>ur.has(e),En=e=>Symbol.toStringTag in e&&e[Symbol.toStringTag]==="Set"&&ur.has(e);function se(e){const t=[],r=new Map;let n=0;const i=new WeakMap,c=()=>{const a=kn.get(l),u=a==null?void 0:a[1];if(u&&!i.has(u)){const p=new Map(r);i.set(u,p)}},f=a=>i.get(a)||r;if(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("not iterable");for(const a of e)if(!r.has(a)){const u=We(a);r.set(u,n),t[n++]=u}}const l={data:t,index:n,epoch:0,get size(){return He(this)||c(),r.size},has(a){const u=f(this),p=We(a);return this.epoch,u.has(p)},add(a){if(!He(this))throw new Error("Cannot perform mutations on a snapshot");const u=We(a);return r.has(u)||(r.set(u,this.index),this.data[this.index++]=u,this.epoch++),this},delete(a){if(!He(this))throw new Error("Cannot perform mutations on a snapshot");const u=We(a),p=r.get(u);return p===void 0?!1:(delete this.data[p],r.delete(u),this.epoch++,!0)},clear(){if(!He(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,r.clear()},forEach(a){this.epoch,f(this).forEach(p=>{a(this.data[p],this.data[p],this)})},*values(){this.epoch;const a=f(this);for(const u of a.values())yield this.data[u]},keys(){return this.epoch,this.values()},*entries(){this.epoch;const a=f(this);for(const u of a.values()){const p=this.data[u];yield[p,p]}},toJSON(){return new Set(this.values())},[Symbol.iterator](){return this.values()},get[Symbol.toStringTag](){return"Set"},intersection(a){this.epoch;const u=se(a),p=se();for(const g of this.values())u.has(g)&&p.add(g);return se(p)},union(a){this.epoch;const u=se(),p=se(a);for(const g of this.values())u.add(g);for(const g of p)u.add(g);return se(u)},difference(a){this.epoch;const u=se(),p=se(a);for(const g of this.values())p.has(g)||u.add(g);return se(u)},symmetricDifference(a){this.epoch;const u=se(),p=se(a);for(const g of this.values())p.has(g)||u.add(g);for(const g of p.values())this.has(g)||u.add(g);return se(u)},isSubsetOf(a){this.epoch;const u=se(a);return this.size<=a.size&&[...this.values()].every(p=>u.has(p))},isSupersetOf(a){this.epoch;const u=se(a);return this.size>=a.size&&[...u].every(p=>this.has(p))},isDisjointFrom(a){this.epoch;const u=se(a);return[...this.values()].every(p=>!u.has(p))}},h=Ue(l);return Object.defineProperties(h,{size:{enumerable:!1},data:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(h),h}const bn=e=>typeof e=="object"&&e!==null;let at;const Rn=()=>(at||(at=Et().refSet),at);function lr(e,t=Rn){if(!bn(e)||t().has(e))return e;if(En(e))return se([...e]);if(Pn(e))return bt([...e.entries()]);const r=Array.isArray(e)?[]:Object.create(Object.getPrototypeOf(e));return Reflect.ownKeys(e).forEach(n=>{r[n]=lr(e[n],t)}),r}const hr=()=>({experiments:[],experimentIdToThresholds:{},referenceProteinsById:{},proteinIdToReferenceProtein:bt(),structures:[],aminoAcidsMustMatch:!1,experimentIdToVisibleCrosslinkIds:{},experimentIdToGroupedStructureIds:{},groupDuplicatedCrosslinks:!0}),ue=Ue(hr()),Tn=(e,t=ue)=>{t.experiments.push(...e);for(const{id:r,crosslinks:n}of e)t.experimentIdToThresholds[r]={lower:22,upper:37},t.experimentIdToVisibleCrosslinkIds[r]=se(n.map(({id:i})=>i)),t.experimentIdToGroupedStructureIds[r]=gr([t.structures.map(({id:i})=>i)])},ti=e=>{var r;const t=(r=ue.experiments.find(n=>n.id===e))==null?void 0:r.proteins.map(({id:n})=>n);if(yr(t)){for(const n of t)ue.proteinIdToReferenceProtein.delete(n);for(const n of ue.structures){if(!n||n.loading)return;for(const[i,c]of Object.entries(n.chainIdToProteinIdToMapping)){const f=t.filter(l=>c[l]!==void 0);for(const l of f)n.chainIdToProteinIdToMapping[i][l]=void 0}}}ue.experiments=ue.experiments.filter(n=>n.id!==e),ue.experimentIdToThresholds=Object.fromEntries(Object.entries(ue.experimentIdToThresholds).filter(([n])=>n!==e))},ri=(e,{lower:t,upper:r})=>{ue.experimentIdToThresholds[e]={lower:t,upper:r}},ni=(e,t,r)=>{const n=ue.experiments.find(({id:c})=>c===e);if(!n)throw new Error(`Experiment ${e} not found`);const i=n.proteins.find(({id:c})=>c===t);if(!i)throw new Error(`Protein ${t} not found in experiment ${e}`);dr(i,r)},dr=(e,t)=>{if(!t)return;const r=lr(t);Object.keys(r).forEach(n=>{const i=r[n];i&&(e[n]=i)})},ii=e=>{dr(ue,e)},In=e=>{const t=hr();return Tn(e,t),t},si=()=>{const{experiments:e,referenceProteinsById:t,structures:r}=_n(ue);return e.length===0&&Object.keys(t).length===0&&r.length===0},oi=()=>{const{proteinIdToReferenceProtein:e,experimentIdToVisibleCrosslinkIds:t,structures:r,...n}=mt(ue);return{proteinIdToReferenceProtein:Array.from(e.entries()),experimentIdToVisibleCrosslinkIds:Object.fromEntries(Object.entries(t).map(([i,c])=>[i,Array.from(c)])),structures:r.flatMap(i=>i.loading?[]:[{...i,chainIdToProteinIdToMapping:Object.fromEntries(Object.entries(i.chainIdToProteinIdToMapping).map(([c,f])=>[c,Object.fromEntries(Object.entries(f).map(([l,h])=>[l,h?Array.from(h.entries()).map(([a,u])=>u?[a,u]:[a]):void 0]))]))}]),...n}},On=({proteinIdToReferenceProtein:e,experimentIdToVisibleCrosslinkIds:t,structures:r,...n})=>({proteinIdToReferenceProtein:bt(e),experimentIdToVisibleCrosslinkIds:Object.fromEntries(Object.entries(t).map(([i,c])=>[i,se(c)])),structures:r.map(i=>({...i,chainIdToProteinIdToMapping:Object.fromEntries(Object.entries(i.chainIdToProteinIdToMapping).map(([c,f])=>[c,Object.fromEntries(Object.entries(f).map(([l,h])=>[l,h?vn(new Map(h.map(a=>a.length===1?[a[0],void 0]:[a[0],a[1]]))):void 0]))]))})),...n});var Je={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/var xn=Je.exports,Nt;function An(){return Nt||(Nt=1,function(e,t){((r,n)=>{e.exports=n()})(xn,function r(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},i,c=!n.document&&!!n.postMessage,f=n.IS_PAPA_WORKER||!1,l={},h=0,a={};function u(o){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(s){var d=z(s);d.chunkSize=parseInt(d.chunkSize),s.step||s.chunk||(d.chunkSize=null),this._handle=new L(d),(this._handle.streamer=this)._config=d}).call(this,o),this.parseChunk=function(s,d){var v=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<v){let x=this._config.newline;x||(y=this._config.quoteChar||'"',x=this._handle.guessLineEndings(s,y)),s=[...s.split(x).slice(v)].join(x)}this.isFirstChunk&&b(this._config.beforeFirstChunk)&&(y=this._config.beforeFirstChunk(s))!==void 0&&(s=y),this.isFirstChunk=!1,this._halted=!1;var v=this._partialLine+s,y=(this._partialLine="",this._handle.parse(v,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(s=y.meta.cursor,v=(this._finished||(this._partialLine=v.substring(s-this._baseIndex),this._baseIndex=s),y&&y.data&&(this._rowCount+=y.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),f)n.postMessage({results:y,workerId:a.WORKER_ID,finished:v});else if(b(this._config.chunk)&&!d){if(this._config.chunk(y,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=y=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(y.data),this._completeResults.errors=this._completeResults.errors.concat(y.errors),this._completeResults.meta=y.meta),this._completed||!v||!b(this._config.complete)||y&&y.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),v||y&&y.meta.paused||this._nextChunk(),y}this._halted=!0},this._sendError=function(s){b(this._config.error)?this._config.error(s):f&&this._config.error&&n.postMessage({workerId:a.WORKER_ID,error:s,finished:!1})}}function p(o){var s;(o=o||{}).chunkSize||(o.chunkSize=a.RemoteChunkSize),u.call(this,o),this._nextChunk=c?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(d){this._input=d,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(s=new XMLHttpRequest,this._config.withCredentials&&(s.withCredentials=this._config.withCredentials),c||(s.onload=q(this._chunkLoaded,this),s.onerror=q(this._chunkError,this)),s.open(this._config.downloadRequestBody?"POST":"GET",this._input,!c),this._config.downloadRequestHeaders){var d,v=this._config.downloadRequestHeaders;for(d in v)s.setRequestHeader(d,v[d])}var y;this._config.chunkSize&&(y=this._start+this._config.chunkSize-1,s.setRequestHeader("Range","bytes="+this._start+"-"+y));try{s.send(this._config.downloadRequestBody)}catch(x){this._chunkError(x.message)}c&&s.status===0&&this._chunkError()}},this._chunkLoaded=function(){s.readyState===4&&(s.status<200||400<=s.status?this._chunkError():(this._start+=this._config.chunkSize||s.responseText.length,this._finished=!this._config.chunkSize||this._start>=(d=>(d=d.getResponseHeader("Content-Range"))!==null?parseInt(d.substring(d.lastIndexOf("/")+1)):-1)(s),this.parseChunk(s.responseText)))},this._chunkError=function(d){d=s.statusText||d,this._sendError(new Error(d))}}function g(o){(o=o||{}).chunkSize||(o.chunkSize=a.LocalChunkSize),u.call(this,o);var s,d,v=typeof FileReader<"u";this.stream=function(y){this._input=y,d=y.slice||y.webkitSlice||y.mozSlice,v?((s=new FileReader).onload=q(this._chunkLoaded,this),s.onerror=q(this._chunkError,this)):s=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var y=this._input,x=(this._config.chunkSize&&(x=Math.min(this._start+this._config.chunkSize,this._input.size),y=d.call(y,this._start,x)),s.readAsText(y,this._config.encoding));v||this._chunkLoaded({target:{result:x}})},this._chunkLoaded=function(y){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(y.target.result)},this._chunkError=function(){this._sendError(s.error)}}function T(o){var s;u.call(this,o=o||{}),this.stream=function(d){return s=d,this._nextChunk()},this._nextChunk=function(){var d,v;if(!this._finished)return d=this._config.chunkSize,s=d?(v=s.substring(0,d),s.substring(d)):(v=s,""),this._finished=!s,this.parseChunk(v)}}function D(o){u.call(this,o=o||{});var s=[],d=!0,v=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(y){this._input=y,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){v&&s.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),s.length?this.parseChunk(s.shift()):d=!0},this._streamData=q(function(y){try{s.push(typeof y=="string"?y:y.toString(this._config.encoding)),d&&(d=!1,this._checkIsFinished(),this.parseChunk(s.shift()))}catch(x){this._streamError(x)}},this),this._streamError=q(function(y){this._streamCleanUp(),this._sendError(y)},this),this._streamEnd=q(function(){this._streamCleanUp(),v=!0,this._streamData("")},this),this._streamCleanUp=q(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function L(o){var s,d,v,y,x=Math.pow(2,53),j=-x,V=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,K=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,k=this,$=0,P=0,ee=!1,R=!1,A=[],S={data:[],errors:[],meta:{}};function W(M){return o.skipEmptyLines==="greedy"?M.join("").trim()==="":M.length===1&&M[0].length===0}function C(){if(S&&v&&(re("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),v=!1),o.skipEmptyLines&&(S.data=S.data.filter(function(I){return!W(I)})),B()){let I=function(Y,G){b(o.transformHeader)&&(Y=o.transformHeader(Y,G)),A.push(Y)};if(S)if(Array.isArray(S.data[0])){for(var M=0;B()&&M<S.data.length;M++)S.data[M].forEach(I);S.data.splice(0,1)}else S.data.forEach(I)}function N(I,Y){for(var G=o.header?{}:[],H=0;H<I.length;H++){var Z=H,U=I[H],U=((he,F)=>(X=>(o.dynamicTypingFunction&&o.dynamicTyping[X]===void 0&&(o.dynamicTyping[X]=o.dynamicTypingFunction(X)),(o.dynamicTyping[X]||o.dynamicTyping)===!0))(he)?F==="true"||F==="TRUE"||F!=="false"&&F!=="FALSE"&&((X=>{if(V.test(X)&&(X=parseFloat(X),j<X&&X<x))return 1})(F)?parseFloat(F):K.test(F)?new Date(F):F===""?null:F):F)(Z=o.header?H>=A.length?"__parsed_extra":A[H]:Z,U=o.transform?o.transform(U,Z):U);Z==="__parsed_extra"?(G[Z]=G[Z]||[],G[Z].push(U)):G[Z]=U}return o.header&&(H>A.length?re("FieldMismatch","TooManyFields","Too many fields: expected "+A.length+" fields but parsed "+H,P+Y):H<A.length&&re("FieldMismatch","TooFewFields","Too few fields: expected "+A.length+" fields but parsed "+H,P+Y)),G}var J;S&&(o.header||o.dynamicTyping||o.transform)&&(J=1,!S.data.length||Array.isArray(S.data[0])?(S.data=S.data.map(N),J=S.data.length):S.data=N(S.data,0),o.header&&S.meta&&(S.meta.fields=A),P+=J)}function B(){return o.header&&A.length===0}function re(M,N,J,I){M={type:M,code:N,message:J},I!==void 0&&(M.row=I),S.errors.push(M)}b(o.step)&&(y=o.step,o.step=function(M){S=M,B()?C():(C(),S.data.length!==0&&($+=M.data.length,o.preview&&$>o.preview?d.abort():(S.data=S.data[0],y(S,k))))}),this.parse=function(M,N,J){var I=o.quoteChar||'"',I=(o.newline||(o.newline=this.guessLineEndings(M,I)),v=!1,o.delimiter?b(o.delimiter)&&(o.delimiter=o.delimiter(M),S.meta.delimiter=o.delimiter):((I=((Y,G,H,Z,U)=>{var he,F,X,Se;U=U||[",","	","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var be=0;be<U.length;be++){for(var ve,Ie=U[be],ae=0,me=0,ie=0,ce=(X=void 0,new w({comments:Z,delimiter:Ie,newline:G,preview:10}).parse(Y)),we=0;we<ce.data.length;we++)H&&W(ce.data[we])?ie++:(ve=ce.data[we].length,me+=ve,X===void 0?X=ve:0<ve&&(ae+=Math.abs(ve-X),X=ve));0<ce.data.length&&(me/=ce.data.length-ie),(F===void 0||ae<=F)&&(Se===void 0||Se<me)&&1.99<me&&(F=ae,he=Ie,Se=me)}return{successful:!!(o.delimiter=he),bestDelimiter:he}})(M,o.newline,o.skipEmptyLines,o.comments,o.delimitersToGuess)).successful?o.delimiter=I.bestDelimiter:(v=!0,o.delimiter=a.DefaultDelimiter),S.meta.delimiter=o.delimiter),z(o));return o.preview&&o.header&&I.preview++,s=M,d=new w(I),S=d.parse(s,N,J),C(),ee?{meta:{paused:!0}}:S||{meta:{paused:!1}}},this.paused=function(){return ee},this.pause=function(){ee=!0,d.abort(),s=b(o.chunk)?"":s.substring(d.getCharIndex())},this.resume=function(){k.streamer._halted?(ee=!1,k.streamer.parseChunk(s,!0)):setTimeout(k.resume,3)},this.aborted=function(){return R},this.abort=function(){R=!0,d.abort(),S.meta.aborted=!0,b(o.complete)&&o.complete(S),s=""},this.guessLineEndings=function(Y,I){Y=Y.substring(0,1048576);var I=new RegExp(m(I)+"([^]*?)"+m(I),"gm"),J=(Y=Y.replace(I,"")).split("\r"),I=Y.split(`
`),Y=1<I.length&&I[0].length<J[0].length;if(J.length===1||Y)return`
`;for(var G=0,H=0;H<J.length;H++)J[H][0]===`
`&&G++;return G>=J.length/2?`\r
`:"\r"}}function m(o){return o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function w(o){var s=(o=o||{}).delimiter,d=o.newline,v=o.comments,y=o.step,x=o.preview,j=o.fastMode,V=null,K=!1,k=o.quoteChar==null?'"':o.quoteChar,$=k;if(o.escapeChar!==void 0&&($=o.escapeChar),(typeof s!="string"||-1<a.BAD_DELIMITERS.indexOf(s))&&(s=","),v===s)throw new Error("Comment character same as delimiter");v===!0?v="#":(typeof v!="string"||-1<a.BAD_DELIMITERS.indexOf(v))&&(v=!1),d!==`
`&&d!=="\r"&&d!==`\r
`&&(d=`
`);var P=0,ee=!1;this.parse=function(R,A,S){if(typeof R!="string")throw new Error("Input must be a string");var W=R.length,C=s.length,B=d.length,re=v.length,M=b(y),N=[],J=[],I=[],Y=P=0;if(!R)return ae();if(j||j!==!1&&R.indexOf(k)===-1){for(var G=R.split(d),H=0;H<G.length;H++){if(I=G[H],P+=I.length,H!==G.length-1)P+=d.length;else if(S)return ae();if(!v||I.substring(0,re)!==v){if(M){if(N=[],Se(I.split(s)),me(),ee)return ae()}else Se(I.split(s));if(x&&x<=H)return N=N.slice(0,x),ae(!0)}}return ae()}for(var Z=R.indexOf(s,P),U=R.indexOf(d,P),he=new RegExp(m($)+m(k),"g"),F=R.indexOf(k,P);;)if(R[P]===k)for(F=P,P++;;){if((F=R.indexOf(k,F+1))===-1)return S||J.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:N.length,index:P}),ve();if(F===W-1)return ve(R.substring(P,F).replace(he,k));if(k===$&&R[F+1]===$)F++;else if(k===$||F===0||R[F-1]!==$){Z!==-1&&Z<F+1&&(Z=R.indexOf(s,F+1));var X=be((U=U!==-1&&U<F+1?R.indexOf(d,F+1):U)===-1?Z:Math.min(Z,U));if(R.substr(F+1+X,C)===s){I.push(R.substring(P,F).replace(he,k)),R[P=F+1+X+C]!==k&&(F=R.indexOf(k,P)),Z=R.indexOf(s,P),U=R.indexOf(d,P);break}if(X=be(U),R.substring(F+1+X,F+1+X+B)===d){if(I.push(R.substring(P,F).replace(he,k)),Ie(F+1+X+B),Z=R.indexOf(s,P),F=R.indexOf(k,P),M&&(me(),ee))return ae();if(x&&N.length>=x)return ae(!0);break}J.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:N.length,index:P}),F++}}else if(v&&I.length===0&&R.substring(P,P+re)===v){if(U===-1)return ae();P=U+B,U=R.indexOf(d,P),Z=R.indexOf(s,P)}else if(Z!==-1&&(Z<U||U===-1))I.push(R.substring(P,Z)),P=Z+C,Z=R.indexOf(s,P);else{if(U===-1)break;if(I.push(R.substring(P,U)),Ie(U+B),M&&(me(),ee))return ae();if(x&&N.length>=x)return ae(!0)}return ve();function Se(ie){N.push(ie),Y=P}function be(ie){var ce=0;return ce=ie!==-1&&(ie=R.substring(F+1,ie))&&ie.trim()===""?ie.length:ce}function ve(ie){return S||(ie===void 0&&(ie=R.substring(P)),I.push(ie),P=W,Se(I),M&&me()),ae()}function Ie(ie){P=ie,Se(I),I=[],U=R.indexOf(d,P)}function ae(ie){if(o.header&&!A&&N.length&&!K){var ce=N[0],we={},it=new Set(ce);let Rt=!1;for(let Re=0;Re<ce.length;Re++){let ge=ce[Re];if(we[ge=b(o.transformHeader)?o.transformHeader(ge,Re):ge]){let Oe,Tt=we[ge];for(;Oe=ge+"_"+Tt,Tt++,it.has(Oe););it.add(Oe),ce[Re]=Oe,we[ge]++,Rt=!0,(V=V===null?{}:V)[Oe]=ge}else we[ge]=1,ce[Re]=ge;it.add(ge)}Rt&&console.warn("Duplicate headers found and renamed."),K=!0}return{data:N,errors:J,meta:{delimiter:s,linebreak:d,aborted:ee,truncated:!!ie,cursor:Y+(A||0),renamedHeaders:V}}}function me(){y(ae()),N=[],J=[]}},this.abort=function(){ee=!0},this.getCharIndex=function(){return P}}function _(o){var s=o.data,d=l[s.workerId],v=!1;if(s.error)d.userError(s.error,s.file);else if(s.results&&s.results.data){var y={abort:function(){v=!0,E(s.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:O,resume:O};if(b(d.userStep)){for(var x=0;x<s.results.data.length&&(d.userStep({data:s.results.data[x],errors:s.results.errors,meta:s.results.meta},y),!v);x++);delete s.results}else b(d.userChunk)&&(d.userChunk(s.results,y,s.file),delete s.results)}s.finished&&!v&&E(s.workerId,s.results)}function E(o,s){var d=l[o];b(d.userComplete)&&d.userComplete(s),d.terminate(),delete l[o]}function O(){throw new Error("Not implemented.")}function z(o){if(typeof o!="object"||o===null)return o;var s,d=Array.isArray(o)?[]:{};for(s in o)d[s]=z(o[s]);return d}function q(o,s){return function(){o.apply(s,arguments)}}function b(o){return typeof o=="function"}return a.parse=function(o,s){var d=(s=s||{}).dynamicTyping||!1;if(b(d)&&(s.dynamicTypingFunction=d,d={}),s.dynamicTyping=d,s.transform=!!b(s.transform)&&s.transform,!s.worker||!a.WORKERS_SUPPORTED)return d=null,a.NODE_STREAM_INPUT,typeof o=="string"?(o=(v=>v.charCodeAt(0)!==65279?v:v.slice(1))(o),d=new(s.download?p:T)(s)):o.readable===!0&&b(o.read)&&b(o.on)?d=new D(s):(n.File&&o instanceof File||o instanceof Object)&&(d=new g(s)),d.stream(o);(d=(()=>{var v;return!!a.WORKERS_SUPPORTED&&(v=(()=>{var y=n.URL||n.webkitURL||null,x=r.toString();return a.BLOB_URL||(a.BLOB_URL=y.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",x,")();"],{type:"text/javascript"})))})(),(v=new n.Worker(v)).onmessage=_,v.id=h++,l[v.id]=v)})()).userStep=s.step,d.userChunk=s.chunk,d.userComplete=s.complete,d.userError=s.error,s.step=b(s.step),s.chunk=b(s.chunk),s.complete=b(s.complete),s.error=b(s.error),delete s.worker,d.postMessage({input:o,config:s,workerId:d.id})},a.unparse=function(o,s){var d=!1,v=!0,y=",",x=`\r
`,j='"',V=j+j,K=!1,k=null,$=!1,P=((()=>{if(typeof s=="object"){if(typeof s.delimiter!="string"||a.BAD_DELIMITERS.filter(function(A){return s.delimiter.indexOf(A)!==-1}).length||(y=s.delimiter),typeof s.quotes!="boolean"&&typeof s.quotes!="function"&&!Array.isArray(s.quotes)||(d=s.quotes),typeof s.skipEmptyLines!="boolean"&&typeof s.skipEmptyLines!="string"||(K=s.skipEmptyLines),typeof s.newline=="string"&&(x=s.newline),typeof s.quoteChar=="string"&&(j=s.quoteChar),typeof s.header=="boolean"&&(v=s.header),Array.isArray(s.columns)){if(s.columns.length===0)throw new Error("Option columns is empty");k=s.columns}s.escapeChar!==void 0&&(V=s.escapeChar+j),s.escapeFormulae instanceof RegExp?$=s.escapeFormulae:typeof s.escapeFormulae=="boolean"&&s.escapeFormulae&&($=/^[=+\-@\t\r].*$/)}})(),new RegExp(m(j),"g"));if(typeof o=="string"&&(o=JSON.parse(o)),Array.isArray(o)){if(!o.length||Array.isArray(o[0]))return ee(null,o,K);if(typeof o[0]=="object")return ee(k||Object.keys(o[0]),o,K)}else if(typeof o=="object")return typeof o.data=="string"&&(o.data=JSON.parse(o.data)),Array.isArray(o.data)&&(o.fields||(o.fields=o.meta&&o.meta.fields||k),o.fields||(o.fields=Array.isArray(o.data[0])?o.fields:typeof o.data[0]=="object"?Object.keys(o.data[0]):[]),Array.isArray(o.data[0])||typeof o.data[0]=="object"||(o.data=[o.data])),ee(o.fields||[],o.data||[],K);throw new Error("Unable to serialize unrecognized input");function ee(A,S,W){var C="",B=(typeof A=="string"&&(A=JSON.parse(A)),typeof S=="string"&&(S=JSON.parse(S)),Array.isArray(A)&&0<A.length),re=!Array.isArray(S[0]);if(B&&v){for(var M=0;M<A.length;M++)0<M&&(C+=y),C+=R(A[M],M);0<S.length&&(C+=x)}for(var N=0;N<S.length;N++){var J=(B?A:S[N]).length,I=!1,Y=B?Object.keys(S[N]).length===0:S[N].length===0;if(W&&!B&&(I=W==="greedy"?S[N].join("").trim()==="":S[N].length===1&&S[N][0].length===0),W==="greedy"&&B){for(var G=[],H=0;H<J;H++){var Z=re?A[H]:H;G.push(S[N][Z])}I=G.join("").trim()===""}if(!I){for(var U=0;U<J;U++){0<U&&!Y&&(C+=y);var he=B&&re?A[U]:U;C+=R(S[N][he],U)}N<S.length-1&&(!W||0<J&&!Y)&&(C+=x)}}return C}function R(A,S){var W,C;return A==null?"":A.constructor===Date?JSON.stringify(A).slice(1,25):(C=!1,$&&typeof A=="string"&&$.test(A)&&(A="'"+A,C=!0),W=A.toString().replace(P,V),(C=C||d===!0||typeof d=="function"&&d(A,S)||Array.isArray(d)&&d[S]||((B,re)=>{for(var M=0;M<re.length;M++)if(-1<B.indexOf(re[M]))return!0;return!1})(W,a.BAD_DELIMITERS)||-1<W.indexOf(y)||W.charAt(0)===" "||W.charAt(W.length-1)===" ")?j+W+j:W)}},a.RECORD_SEP="",a.UNIT_SEP="",a.BYTE_ORDER_MARK="\uFEFF",a.BAD_DELIMITERS=["\r",`
`,'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!c&&!!n.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=w,a.ParserHandle=L,a.NetworkStreamer=p,a.FileStreamer=g,a.StringStreamer=T,a.ReadableStreamStreamer=D,n.jQuery&&((i=n.jQuery).fn.parse=function(o){var s=o.config||{},d=[];return this.each(function(x){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var j=0;j<this.files.length;j++)d.push({file:this.files[j],inputElem:this,instanceConfig:i.extend({},s)})}),v(),this;function v(){if(d.length===0)b(o.complete)&&o.complete();else{var x,j,V,K,k=d[0];if(b(o.before)){var $=o.before(k.file,k.inputElem);if(typeof $=="object"){if($.action==="abort")return x="AbortError",j=k.file,V=k.inputElem,K=$.reason,void(b(o.error)&&o.error({name:x},j,V,K));if($.action==="skip")return void y();typeof $.config=="object"&&(k.instanceConfig=i.extend(k.instanceConfig,$.config))}else if($==="skip")return void y()}var P=k.instanceConfig.complete;k.instanceConfig.complete=function(ee){b(P)&&P(ee,k.file,k.inputElem),y()},a.parse(k.file,k.instanceConfig)}}function y(){d.splice(0,1),v()}}),f&&(n.onmessage=function(o){o=o.data,a.WORKER_ID===void 0&&o&&(a.WORKER_ID=o.workerId),typeof o.input=="string"?n.postMessage({workerId:a.WORKER_ID,results:a.parse(o.input,o.config),finished:!0}):(n.File&&o.input instanceof File||o.input instanceof Object)&&(o=a.parse(o.input,o.config))&&n.postMessage({workerId:a.WORKER_ID,results:o,finished:!0})}),(p.prototype=Object.create(u.prototype)).constructor=p,(g.prototype=Object.create(u.prototype)).constructor=g,(T.prototype=Object.create(T.prototype)).constructor=T,(D.prototype=Object.create(u.prototype)).constructor=D,a})}(Je)),Je.exports}var Cn=An();const Mn=Er(Cn),Dn=({from:e,to:t})=>`${e.proteinId}-${e.linkPosition}-${t.proteinId}-${t.linkPosition}`,Fn=(e,{position:t,sequence:r})=>`${e}-${t}-${r}`,Ln=(e,t)=>e.proteinName!==t.proteinName?e.proteinName>t.proteinName?1:-1:e.linkPosition-t.linkPosition,zn=(e,t)=>Math.min(e.position+e.sequence.length,t.position+t.sequence.length)>Math.max(e.position,t.position),Ut=(e,t)=>{let r=e.replaceAll(/[\[\]\{\}]/g,"");for(const[n,i]of Object.entries(t))r=r.replaceAll(i,n);if(!/^[GAVLITSMCPFYWHKRDENQ]*$/.test(r))throw new Error(`Sequence contains invalid amino acid codes: ${r}`);return r.toUpperCase()};function $n(e){return e.Protein1!==void 0&&e.Protein2!==void 0?[e.Protein1,e.Protein2]:e.Protein!==void 0?[e.Protein,e.Protein]:["Protein","Protein"]}function Nn(e,t){if(e.PepPos1!==void 0&&e.PepSeq1!==void 0&&e.PepPos2!==void 0&&e.PepSeq2!==void 0)return[{position:Number.parseInt(e.PepPos1),sequence:Ut(e.PepSeq1,t)},{position:Number.parseInt(e.PepPos2),sequence:Ut(e.PepSeq2,t)}]}function Ke(e,t){return{linkPositionInPeptide:t,linkPosition:Math.max(0,e.position+t-1),aminoAcid:e.sequence[t-1]}}function Be(e){var n;const{aminoAcid:t,position:r}=((n=/^(?<aminoAcid>[ACDEFGHIKLMNPQRSTVWY\{])(?<position>\d+)$/.exec(e))==null?void 0:n.groups)??{};if(!t||!r)throw new Error(`Residue field is formatted incorrectly: "${e}"`);return{aminoAcid:t==="{"?void 0:t,linkPosition:Number.parseInt(r)}}function Un(e,t){if(t){if(e.LinkPos1!==void 0&&e.LinkPos2!==void 0)return[Ke(t[0],Number.parseInt(e.LinkPos1)),Ke(t[1],Number.parseInt(e.LinkPos2))];if(e.ResidueInPep1!==void 0&&e.ResidueInPep2!==void 0){const n=Be(e.ResidueInPep1),i=Ke(t[0],n.linkPosition);if(n.aminoAcid!==i.aminoAcid)throw new Error(`Amino acid according to residue is different then expected from peptide (${JSON.stringify(t[0])}: ${JSON.stringify(n)}, ${JSON.stringify(i)})`);const c=Be(e.ResidueInPep2),f=Ke(t[1],c.linkPosition);if(c.aminoAcid!==f.aminoAcid)throw new Error(`Amino acid according to residue is different then expected from peptide (${JSON.stringify(t[1])}: ${JSON.stringify(c)}, ${JSON.stringify(f)})`);return[i,f]}}if(e.Residue1!==void 0&&e.Residue2!==void 0)return[Be(e.Residue1),Be(e.Residue2)];let r;if(e.AminoAcid1!==void 0&&e.AminoAcid2!==void 0&&(r=[e.AminoAcid1,e.AminoAcid2]),e.Position1!==void 0&&e.Position2!==void 0)return[{linkPosition:Number.parseInt(e.Position1),aminoAcid:r==null?void 0:r[0]},{linkPosition:Number.parseInt(e.Position2),aminoAcid:r==null?void 0:r[1]}];throw new Error("Failed to parse crosslink")}function qn(e,t){const r=$n(e),n=Nn(e,t),i=Un(e,n).map((c,f)=>({proteinName:r[f],...c}));return[{peptide:n==null?void 0:n[0],link:i[0]},{peptide:n==null?void 0:n[1],link:i[1]}]}const oe=[];for(let e=0;e<256;++e)oe.push((e+256).toString(16).slice(1));function jn(e,t=0){return(oe[e[t+0]]+oe[e[t+1]]+oe[e[t+2]]+oe[e[t+3]]+"-"+oe[e[t+4]]+oe[e[t+5]]+"-"+oe[e[t+6]]+oe[e[t+7]]+"-"+oe[e[t+8]]+oe[e[t+9]]+"-"+oe[e[t+10]]+oe[e[t+11]]+oe[e[t+12]]+oe[e[t+13]]+oe[e[t+14]]+oe[e[t+15]]).toLowerCase()}let ct;const Wn=new Uint8Array(16);function Hn(){if(!ct){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ct=crypto.getRandomValues.bind(crypto)}return ct(Wn)}const Kn=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),qt={randomUUID:Kn};function jt(e,t,r){var i;if(qt.randomUUID&&!e)return qt.randomUUID();e=e||{};const n=e.random??((i=e.rng)==null?void 0:i.call(e))??Hn();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,jn(n)}function*Bn(e,t){const r=/\s*^>(?<id>[^>\s\r\n]+)([^\S\r\n]+(?<desc>[^>\r\n]*?))?(?<sequence>(?:\r?\n[^\S\r\n]*[A-Za-z-]+)+)$\s*/gmy;let n;for(;(n=r.exec(e))!==null;){n.index===r.lastIndex&&r.lastIndex++;const{id:i,desc:c,sequence:f}=n.groups??{};!i||!f||(yield{id:i.trim(),desc:c==null?void 0:c.trim(),sequence:f.split(/\s+/).join("")})}}function ai(e){const t=/\s*^>(?<id>[^>\s\r\n]+)([^\S\r\n]+(?<desc>[^>\r\n]*?))?(?<sequence>(?:\r?\n[^\S\r\n]*[A-Za-z-]+)+)$\s*/gmy;return t.test(e)&&e.replaceAll(t,"").trim().length===0}function ci(e){return e.map(({id:t,desc:r,sequence:n})=>`>${t}${r?` ${r}`:""}
${n}`).join(`

`)}const pr=async(e,t=null,r={M:"Mox",C:"Ccm"},n={},i)=>new Promise((c,f)=>{Mn.parse(e,{header:t===null,skipEmptyLines:!0,complete:async l=>{try{const h={},a={},u=(m,w)=>{if(!(m in h))h[m]=jt(),a[h[m]]={interProteinCrosslinks:[],intraProteinCrosslinks:[],homoMultimericCrosslinks:[],linkPositionToAminoAcid:new Map,...w?{havePeptides:!0,peptides:[],peptideHashToIndex:{},positionToPeptideIndices:new Map}:{havePeptides:!1}};else if(a[h[m]].havePeptides!==w)throw new Error("Some rows have peptides while others don't");return h[m]},p=(m,w)=>{const _=a[m];if(!_.havePeptides)throw new Error("Some rows have peptides while others don't");const{peptides:E,peptideHashToIndex:O,positionToPeptideIndices:z}=_,q=Fn(m,w);if(q in O)return O[q];const b=E.push(w)-1;O[q]=b;for(let o=w.position;o<w.position+w.sequence.length;o++)z.has(o)||z.set(o,[]),z.get(o).push(b);return b},g=({proteinName:m,...w},_)=>{const E=u(m,!!_);if(w.aminoAcid){const O=a[E].linkPositionToAminoAcid.get(w.linkPosition);if(!O)a[E].linkPositionToAminoAcid.set(w.linkPosition,w.aminoAcid);else if(O!==w.aminoAcid)throw new Error(`Amino acids clash: position ${w.linkPosition} in protein "${m}" is specified with both ${O} and ${w.aminoAcid}`)}return{...w,proteinId:E,peptideIndex:_?p(E,_):void 0}},T=m=>{const[w,_]=qn(m,r).toSorted(({link:E},{link:O})=>Ln(E,O));return{from:g(w.link,w.peptide),to:g(_.link,_.peptide),homoMultimeric:w.link.proteinName===_.link.proteinName?w.peptide&&_.peptide?zn(w.peptide,_.peptide):w.link.linkPosition===_.link.linkPosition:!1,score:m.Score!==void 0?Number.parseFloat(m.Score):void 0}};let D;const L={};l.data.forEach((m,w)=>{var O,z;if(t!==null){if(t.length!==m.length)throw new Error("The number of columns doesn't match the number of rows");m=Object.fromEntries(m.map((q,b)=>[t[b],q]))}if(m.isDecoy!==void 0&&m.isDecoy.toLowerCase()==="true"||i&&((O=m.Protein1)!=null&&O.startsWith(i)||(z=m.Protein2)!=null&&z.startsWith(i)))return;if(D===void 0)D=m.id!==void 0;else if(D!==(m.id!==void 0))throw new Error("The table contains rows both with and without id field. Either make sure that all the rows have id, or remove the id column to use line numbers instead.");const _={id:m.id??String(w+1),...T(m)};_.from.proteinId===_.to.proteinId?(a[_.from.proteinId].intraProteinCrosslinks.push(_.id),_.homoMultimeric&&a[_.from.proteinId].homoMultimericCrosslinks.push(_.id)):(a[_.from.proteinId].interProteinCrosslinks.push(_.id),a[_.to.proteinId].interProteinCrosslinks.push(_.id));const E=Dn(_);E in L||(L[E]=[]),L[E].push(_)});for(const[m,w]of Object.entries(a))if(w.havePeptides)for(const[_,E]of w.positionToPeptideIndices.entries()){if(E.length===1)continue;const O=new Set(E.map(z=>w.peptides[z].sequence[_-w.peptides[z].position]));if(O.size>1)throw new Error(`Peptides clash: position ${_} in protein "${m}" is specified with multiple amino acids: ${Array.from(O)}`)}c({id:jt(),name:e instanceof File?e.name.replace(/\.csv$/i,""):void 0,crosslinks:Object.values(L).flatMap(m=>m),proteins:Object.entries(h).map(([m,w])=>{const _=m.replace(/^>/,""),{linkPositionToAminoAcid:E,interProteinCrosslinks:O,intraProteinCrosslinks:z,homoMultimericCrosslinks:q,...b}=a[w];return{id:w,name:_,linkPositionToAminoAcid:Object.fromEntries(E.entries()),peptides:b.havePeptides?b.peptides:void 0,interProteinCrosslinks:O,intraProteinCrosslinks:z,homoMultimericCrosslinks:q,sequence:n[_]}})})}catch(h){f(h)}},error:l=>f(l)})}),Yn=["Score","m/z","Charge","M+H+","Calculated Mass","Deviation in ppm","PepSeq1","Protein1","PepPos1","PepEnd1","PepSeq2","Protein2","PepPos2","PepEnd2","Scan number","is Selected in Table","Candidate identifier","Folder Number","Retention time in sec","miscellaneous","ResidueInPep1","ResidueInPep2","All linkage positions","Spectrum UUID","local False discovery rate","shortest distance in pdb","Light/Heavy(1/2)","pepScore1","pepScore2","xLinkScore","resultId","MS1intensity","finalScoreComponent"],Vn=(e,t)=>new Promise((r,n)=>{Qr(e,{filter:i=>["Result.csv","properties.mxf","db.fasta"].includes(i.name)},async(i,c)=>{var f,l;if(i)return n(i);try{const h={};if(c["db.fasta"])for(const{id:T,sequence:D}of Bn(new TextDecoder().decode(c["db.fasta"])))h[T]=D;let a="DEC_";const u={};let p;for(const T of new TextDecoder().decode(c["properties.mxf"]).split(`
`)){if(T.startsWith("VARMODIFICATION")||T.startsWith("STATMODIFICATION")){p="modification";continue}else if(T.startsWith("END")){p=void 0;continue}if(p==="modification"){const{from:D,to:L}=((f=/(?<from>[A-Za-z]+);(?<to>[A-Za-z]+)/.exec(T))==null?void 0:f.groups)??{};if(!D||!L)continue;u[D]=L}else if(p===void 0){const{value:D}=((l=/^DECOYIDENTIFIER=(?<value>\w+)/.exec(T))==null?void 0:l.groups)??{};D&&(a=D)}}const g=await pr(new TextDecoder().decode(c["Result.csv"]),Yn,u,h,a);t&&(g.name=t),r(g)}catch(h){n(h)}})}),vr=e=>new Promise((t,r)=>{const n=new FileReader;n.onloadend=i=>{var f,l,h,a;if((l=(f=i.target)==null?void 0:f.error)!=null&&l.message)return r((h=i.target)==null?void 0:h.error);const c=(a=i.target)==null?void 0:a.result;return c instanceof ArrayBuffer?t(new Uint8Array(c)):r(new Error("Invalid file format"))},n.onerror=i=>r(i),n.readAsArrayBuffer(e)}),Jn=async e=>On(JSON.parse(tr(Br(await vr(e))))),mr=async e=>{if(/\.csv$/i.test(e.name))return pr(e);const t=/\.zhrm$/i;if(t.test(e.name))return Vn(await vr(e),e.name.replace(t,""));throw new Error("Invalid file format")},Gn=async e=>{const t=await Promise.all(e.map(mr));return In(t)},fi=Object.freeze(Object.defineProperty({__proto__:null,buildStoreFromExperimentFiles:Gn,readExperimentFile:mr,readProjectFile:Jn},Symbol.toStringTag,{value:"Module"}));export{dr as _,_n as a,Ue as b,ue as c,jt as d,lr as e,ci as f,ti as g,si as h,mr as i,Tn as j,oi as k,Xn as l,ei as m,ii as n,fi as o,Bn as p,vn as r,ri as s,ni as u,ai as v};
